{{> header_inc.html}}
{{> navbar_inc.html}}

	<div id="content" class="container">
		<div class="col-sm-10">
			<div id="board" class="panel panel-default">
				<table class="table table-condensed">
					{{#posts}}
					<tr>
						<td class="post-author" title="{{user_agent}}">{{info}}</td>
						<td class="post-time"   title="{{date}}">{{clock}}</td>
						<td class="post-message text-justify">{{{message}}}</td>
					</tr>
					{{/posts}}
				</table>
			</div>
		</div>

		<div id="post" class="col-sm-10">
			<form id="post-form" name="post-form" class="form-inline">
				<div class="form-group">
					<label class="sr-only" for="message">Message</label>
					<div class="input-group">
						<div class="input-group-addon">Anonyme</div>
						<input type="text" class="form-control" id="message" name="message" placeholder="Entrez votre message ici">
					</div>
					<button type="submit" class="btn btn-primary" id="send">Envoyer</button>
				</div>
			</form>
		</div>
	</div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script>
	$(document).ready(function() {
    	displayBoard();

		$('#post-form').submit(function() {
			console.log("Submitting the form...");
        	var message = $('#message').val();
        	$.post('/post', { 'message': message }, displayBoard);
			console.log("POST request sent.");
			return false;
    	});

    	function displayBoard() {
			console.log("Refreshing board...");
    		//$('#board').load('ac.htm');
    		$('#message').val('');
    		$('#message').focus();
			console.log("Board refreshed.");
    	}
    	//setInterval(displayBoard, 4000);

	});
	</script>

{{> footer_inc.html}}
